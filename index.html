<!DOCTYPE html>
<html>
<head>
    <title>Cosmic ...</title>
    <link rel="stylesheet" type="text/css" href="main.css">
    
    <script src="box2d.min.js" type="text/jscript"></script>
    <script src="box2d-helpers.js" type="text/javascript"></script>
    
    <script src="utils.js"></script>
    <script src="camera.js"></script>
    <script src="init.js"></script>
    
    <script src="animation.js"></script>
    <script src="level.js"></script>
    <script src="bullet.js"></script>
    <script src="ship.js"></script>
    <script src="main.js"></script>
    
    <script src="input.js"></script>

</head>
    <body>
        
        <script>
            InitGame();
            loadAssets();
            
            var player;
            document.addEventListener("keydown", moveShip);
            document.body.addEventListener("touchstart", onTap);
            function moveShip(e) {
                switch(e.which) {
                    case 87: // w
                        player.y -= 25;
                        break;
                    case 83: // s
                        player.y += 25;
                        break;
                    case 65: // a
                        player.x -= 25;
                        break;
                    case 68: // d
                        player.x += 25;
                        break;
                    default:
                        break;
                }
            }
            
            function onTap(e) {
                e.preventDefault();
                var g = app.ctx;
                for(var i = 0, len = e.touches.length; i < len; ++i) {
                    var t = e.touches[i];
                    var x = t.clientX;
                    var y = t.clientY;
                    v//ar str = "(" + x + "," + y + ")";
                    //g.fillText(str, x, y);
                    if (e.x <=(app.canvas.width / 2))
                        player.x -= 25;
                    else
                        player.x += 25;
                }
            }

            function start() {
                Object.defineProperty(app, "camera", {
                    value: new Camera(),
                    enumerable: true,
                    writable: true,
                    configurable: false
                });
                var lev = new Level();
                lev.createNewLevel();
                
                var sound = new Audio("asset/FirstShipLoop.wav");
                sound.loop = true;
                sound.volume = 0.25;
                sound.load();
                sound.play();
                window.setInterval(main, 1000/60);
            }
        </script>

    </body>
</html>
